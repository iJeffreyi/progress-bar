<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>带交互功能的图表幻灯片</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <style>
        .slideshow-wrapper {
            position: relative;
            width: 700px;
            height: 510px;
            margin: 20px auto;
            overflow: hidden;
        }
        
        /* 关键修改：使用绝对定位和z-index控制显示，而非display:none */
        .slide-item {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            z-index: 1;
        }
        
        .slide-item.active {
            opacity: 1;
            pointer-events: auto;
            z-index: 2;
        }
        
        /* 确保iframe正确继承尺寸 */
        .slide-item iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div class="slideshow-wrapper">
        <!-- 幻灯片内容 -->
        <div class="slide-item active">
            <iframe src="https://dycharts.com/xshow/index.html?id=c_d8187cda17621f2ec0f3e69161277ec0" scrolling="no"></iframe>
        </div>
        <div class="slide-item">
            <iframe src="https://dycharts.com/xshow/index.html?id=c_ea2eaf9deb453b4b6d8ac0a7dda5bfb6" scrolling="no"></iframe>
        </div>
        <div class="slide-item">
            <iframe src="https://dycharts.com/xshow/index.html?id=c_25983017970981f777b2f83611414539" scrolling="no"></iframe>
        </div>
        <div class="slide-item">
            <iframe src="https://dycharts.com/xshow/index.html?id=c_5f031bee3c0caa04b631d83cc37f3772" scrolling="no"></iframe>
        </div>
        <div class="slide-item">
            <iframe src="https://dycharts.com/xshow/index.html?id=c_1917befd36ec90909a009aa18bd180e0" scrolling="no"></iframe>
        </div>

        <!-- 导航按钮 -->
        <button id="prevBtn" class="absolute left-2 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white w-10 h-10 rounded-full flex items-center justify-center transition-all z-10">
            <i class="fa fa-chevron-left"></i>
        </button>
        <button id="nextBtn" class="absolute right-2 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white w-10 h-10 rounded-full flex items-center justify-center transition-all z-10">
            <i class="fa fa-chevron-right"></i>
        </button>

        <!-- 指示器 -->
        <div id="indicators" class="absolute bottom-4 left-0 right-0 flex justify-center gap-2 z-10"></div>
    </div>

    <script>
        // 初始化变量
        const slides = document.querySelectorAll('.slide-item');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const indicatorsContainer = document.getElementById('indicators');
        let currentIndex = 0;

        // 创建指示器
        function createIndicators() {
            slides.forEach((_, index) => {
                const dot = document.createElement('button');
                dot.className = `w-3 h-3 rounded-full transition-all ${index === 0 ? 'bg-white' : 'bg-white/50'}`;
                dot.addEventListener('click', () => goToSlide(index));
                indicatorsContainer.appendChild(dot);
            });
        }

        // 显示指定幻灯片
        function showSlide(index) {
            // 移除所有激活状态
            slides.forEach(slide => slide.classList.remove('active'));
            document.querySelectorAll('#indicators button').forEach(dot => {
                dot.classList.remove('bg-white');
                dot.classList.add('bg-white/50');
            });

            // 设置当前激活状态
            slides[index].classList.add('active');
            document.querySelectorAll('#indicators button')[index].classList.remove('bg-white/50');
            document.querySelectorAll('#indicators button')[index].classList.add('bg-white');
            
            currentIndex = index;
            
            // 触发iframe内图表的尺寸重计算
            const activeIframe = slides[index].querySelector('iframe');
            if (activeIframe) {
                // 触发resize事件，帮助图表重新计算尺寸
                const event = new Event('resize');
                activeIframe.contentWindow.dispatchEvent(event);
            }
        }

        // 下一张幻灯片
        function nextSlide() {
            const newIndex = (currentIndex + 1) % slides.length;
            showSlide(newIndex);
        }

        // 上一张幻灯片
        function prevSlide() {
            const newIndex = (currentIndex - 1 + slides.length) % slides.length;
            showSlide(newIndex);
        }

        // 跳转到指定幻灯片
        function goToSlide(index) {
            showSlide(index);
        }

        // 绑定事件
        prevBtn.addEventListener('click', prevSlide);
        nextBtn.addEventListener('click', nextSlide);

        // 初始化
        createIndicators();
        
        // 页面加载完成后确保所有iframe正确初始化
        window.addEventListener('load', () => {
            // 给每个iframe添加加载完成事件
            slides.forEach((slide, index) => {
                const iframe = slide.querySelector('iframe');
                iframe.onload = () => {
                    // 只有当前激活的iframe需要触发尺寸计算
                    if (index === currentIndex) {
                        const event = new Event('resize');
                        iframe.contentWindow.dispatchEvent(event);
                    }
                };
            });
        });
    </script>
</body>
</html>